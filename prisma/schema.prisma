generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model User {
  id        String    @id @default(uuid())
  name      String?
  email     String    @unique
  password  String
  role      String    @default("DOCTOR")
  createdAt DateTime  @default(now())
  patients  Patient[]
}

model Option {
  id       String @id @default(uuid())
  category String
  label    String
  value    String
  order    Int    @default(0)
}

model Patient {
  id              String        @id @default(uuid())
  name            String
  age             Int
  createdBy       String
  createdAt       DateTime      @default(now())
  address         String
  dateOfBirth     DateTime
  district        String
  ethnicity       String
  familyHistory   String?
  finalDiagnosis  String?
  mobile          String
  nid             String?
  pastIllness     String?
  patientId       String        @unique
  relativeMobile  String?
  religion        String        @default("Islam")
  shortHistory    String?
  specialNotes    String?
  spouseMobile    String?
  surgicalHistory String?
  tags            String[]      @default([])
  createdByUser   User          @relation(fields: [createdBy], references: [id])
  tests           PatientTest[]
}

model PatientTest {
  id                String   @id @default(uuid())
  patientId         String?
  sampleDate        DateTime
  autoimmunoProfile Json?
  cardiology        Json?
  rft               Json?
  lft               Json?
  diseaseHistory    Json?
  imaging           Json?
  hematology        Json?
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  patient           Patient? @relation(fields: [patientId], references: [id], onDelete: Cascade)
}
